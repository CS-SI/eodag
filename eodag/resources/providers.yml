USGS:
  priority: 0
  api:
    plugin: UsgsApi
    google_base_url: 'http://storage.googleapis.com/earthengine-public/landsat/'
    metadata_mapping:
      id: '$.entityId'
      geometry: '$.geometry'
      productType: '$.productType'
      title: '$.displayId'
      abstract: '$.summary'
      startTimeFromAscendingNode: '$.startTime'
      completionTimeFromAscendingNode: '$.endTime'
      quicklook: '$.browseUrl'
  products:
    L8_LC8:
      product_type: LANDSAT_8_C1

AmazonWS:
  priority: 0
  search:
    plugin: AwsSearch
    api_endpoint: 'http://finder.eocloud.eu/resto/api/'
    metadata_mapping:
      id: '$.id'
      geometry:
        - box
        - '$.geometry'
      productType:
        - productType
        - '$.properties.productType'
      platform: '$.properties.collection'
      platformSerialIdentifier: '$.properties.platform'
      instrument: '$.properties.instrument'
      processingLevel: '$.properties.processingLevel'
      title: '$.properties.title'
      keyword: '$.properties.keywords'
      abstract: '$.properties.description'
      organisationName: '$.properties.organisationName'
      orbitNumber: '$.properties.orbitNumber'
      orbitDirection: '$.properties.orbitDirection'
      cloudCover:
        - cloudCover
        - '$.properties.cloudCover'
      snowCover: '$.properties.snowCover'
      startTimeFromAscendingNode:
        - startDate
        - '$.properties.startDate'
      completionTimeFromAscendingNode:
        - completionDate
        - '$.properties.completionDate'
      parentIdentifier: '$.properties.parentIdentifier'
      resolution: '$.properties.resolution'
      sensorMode: '$.properties.sensorMode'
      quicklook: '$.properties.quicklook'
  products:
    S2_MSI_L1C:
      product_type: L1C
      collection: Sentinel2
      partial: true
  download:
    plugin: AwsDownload
    associated_bucket: 'sentinel-s2-l1c'
  auth:
    plugin: OAuth

eocloud:
  priority:
  products:
    S1_OCN:
      product_type: OCN
      collection: Sentinel1
      partial: true
    S1_GRD:
      product_type: GRD
      collection: Sentinel1
      partial: true
    S1_SLC:
      product_type: SLC
      collection: Sentinel1
      partial: true
    S1_RAW:
      product_type: RAW
      collection: Sentinel1
      partial: true
    S2_MSI_L1C:
      product_type: L1C
      collection: Sentinel2
      partial: true
    S2_MSI_L2Ap:
      product_type: L2A
      collection: Sentinel2
    L8_L1T:
      product_type: L1T
      collection: Landsat8
    L8_L1GT:
      product_type: L1GT
      collection: Landsat8
    L7_L1G:
      product_type: L1G
      collection: Landsat7
    L7_L1T:
      product_type: L1T
      collection: Landsat7
    L7_L1GT:
      product_type: L1GT
      collection: Landsat7
    L5_L1G:
      product_type: L1G
      collection: Landsat5
    L5_L1GT:
      product_type: L1GT
      collection: Landsat5
    L5_L1T:
      product_type: L1T
      collection: Landsat5
    ES_FRS:
      product_type: FRS
      collection: Envisat
    S3_EFR:
      product_type: EFR
      collection: Sentinel3
    S3_ERR:
      product_type: ERR
      collection: Sentinel3
    S3_RBT:
      product_type: RBT
      collection: Sentinel3
    S3_SRA:
      product_type: SRA
      collection: Sentinel3
    S3_WAT:
      product_type: WAT
      collection: Sentinel3
    S3_LAN:
      product_type: LAN
      collection: Sentinel3
    S3_LST:
      product_type: LST
      collection: Sentinel3
  search:
    plugin: RestoSearch
    api_endpoint: 'http://finder.eocloud.eu/resto/api/'
    product_location_scheme: 'http'
    metadata_mapping:
      id: '$.id'
      geometry:
        - box
        - '$.geometry'
      productType:
        - productType
        - '$.properties.productType'
      platform: '$.properties.collection'
      platformSerialIdentifier: '$.properties.platform'
      instrument: '$.properties.instrument'
      processingLevel: '$.properties.processingLevel'
      title: '$.properties.title'
      keyword: '$.properties.keywords'
      abstract: '$.properties.description'
      organisationName: '$.properties.organisationName'
      orbitNumber: '$.properties.orbitNumber'
      orbitDirection: '$.properties.orbitDirection'
      cloudCover:
        - cloudCover
        - '$.properties.cloudCover'
      snowCover: '$.properties.snowCover'
      startTimeFromAscendingNode:
        - startDate
        - '$.properties.startDate'
      completionTimeFromAscendingNode:
        - completionDate
        - '$.properties.completionDate'
      parentIdentifier: '$.properties.parentIdentifier'
      resolution: '$.properties.resolution'
      sensorMode: '$.properties.sensorMode'
      quicklook: '$.properties.quicklook'
  download:
    plugin: HTTPDownload
    base_uri: 'https://static.eocloud.eu/v1/AUTH_8f07679eeb0a43b19b33669a4c888c45/eorepo'
  auth:
    plugin: TokenAuth
    auth_uri: 'https://finder.eocloud.eu/resto/api/authidentity'
    token_type: json

theia-landsat:
  priority: 0
  products:
    LS_REFLECTANCE:
      collection: Landsat
      product_type: REFLECTANCE
    LS_REFLECTANCETOA:
      collection: Landsat
      product_type: REFLECTANCETOA
    PLD_REFLECTANCE:
      collection: Pleiades
      product_type: REFLECTANCE
    PLD_REFLECTANCETOA:
      collection: Pleiades
      product_type: REFLECTANCETOA
  search:
    plugin: RestoSearch
    api_endpoint: 'https://theia-landsat.cnes.fr/resto/api/'
    metadata_mapping:
      id: '$.id'
      geometry:
        - box
        - '$.geometry'
      productType:
        - productType
        - '$.properties.productType'
      platform: '$.properties.collection'
      platformSerialIdentifier: '$.properties.platform'
      instrument: '$.properties.instrument'
      processingLevel: '$.properties.processingLevel'
      title: '$.properties.title'
      keyword: '$.properties.keywords'
      organisationName: '$.properties.organisationName'
      orbitNumber: '$.properties.orbitNumber'
      orbitDirection: '$.properties.orbitDirection'
      cloudCover:
        - cloudCover
        - '$.properties.cloudCover'
      snowCover: '$.properties.snowCover'
      startTimeFromAscendingNode:
        - startDate
        - '$.properties.startDate'
      completionTimeFromAscendingNode:
        - completionDate
        - '$.properties.completionDate'
      parentIdentifier: '$.properties.parentIdentifier'
      resolution: '$.properties.resolution'
      sensorMode: '$.properties.sensorMode'
      productVersion: '$.properties.version'
      quicklook: '$.properties.quicklook'
  download:
    plugin: HTTPDownload
    base_uri: 'https://theia.cnes.fr/atdistrib/resto2'
  auth:
    plugin: TokenAuth
    auth_uri: 'https://theia.cnes.fr/atdistrib/services/authenticate/'

theia:
  priority: 0
  search:
    plugin: RestoSearch
    api_endpoint: 'https://theia.cnes.fr/atdistrib/resto2/api'
    metadata_mapping:
      id: '$.id'
      geometry:
        - box
        - '$.geometry'
      productType:
        - productType
        - '$.properties.productType'
      platformSerialIdentifier: '$.properties.platform'
      instrument: '$.properties.instrument'
      processingLevel: '$.properties.processingLevel'
      title: '$.properties.title'
      keyword: '$.properties.keywords'
      organisationName: '$.properties.organisationName'
      orbitNumber: '$.properties.orbitNumber'
      orbitDirection: '$.properties.orbitDirection'
      cloudCover:
        - cloudCover
        - '$.properties.cloudCover'
      snowCover: '$.properties.snowCover'
      startTimeFromAscendingNode:
        - startDate
        - '$.properties.startDate'
      completionTimeFromAscendingNode:
        - completionDate
        - '$.properties.completionDate'
      parentIdentifier: '$.properties.parentIdentifier'
      resolution: '$.properties.resolution'
      sensorMode: '$.properties.sensorMode'
      productVersion: '$.properties.version'
      quicklook: '$.properties.quicklook'
  products:
    S2_REFLECTANCE:
      product_type: REFLECTANCE
      collection: SENTINEL2
  download:
    plugin: HTTPDownload
    base_uri: 'https://theia.cnes.fr/atdistrib/resto2'
    dl_url_params:
      issuerId: theia
  auth:
    plugin: TokenAuth
    auth_uri: 'https://theia.cnes.fr/atdistrib/services/authenticate/'

peps:
  priority: 0
  search:
    plugin: RestoSearch
    api_endpoint: 'https://peps.cnes.fr/resto/api'
    metadata_mapping:
      id: '$.id'
      geometry:
        - box
        - '$.geometry'
      productType:
        - productType
        - '$.properties.productType'
      platform: '$.properties.collection'
      platformSerialIdentifier: '$.properties.platform'
      instrument: '$.properties.instrument'
      processingLevel: '$.properties.processingLevel'
      title: '$.properties.title'
      keyword: '$.properties.keywords'
      abstract: '$.properties.description'
      organisationName: '$.properties.organisationName'
      orbitNumber: '$.properties.orbitNumber'
      orbitDirection: '$.properties.orbitDirection'
      cloudCover:
        - cloudCover
        - '$.properties.cloudCover'
      snowCover: '$.properties.snowCover'
      startTimeFromAscendingNode:
        - startDate
        - '$.properties.startDate'
      completionTimeFromAscendingNode:
        - completionDate
        - '$.properties.completionDate'
      parentIdentifier: '$.properties.parentIdentifier'
      resolution: '$.properties.resolution'
      sensorMode: '$.properties.sensorMode'
      quicklook: '$.properties.quicklook'
  products:
    S1_OCN:
      product_type: OCN
      collection: S1
    S1_GRD:
      product_type: GRD
      collection: S1
    S1_SLC:
      product_type: SLC
      collection: S1
    S2_MSI_L1C:
      collection: S2ST
      product_type: S2MSI1C
      partial: true
    S3_EFR:
      product_type: OL_1_EFR___
      collection: S3
    S3_ERR:
      product_type: OL_1_ERR___
      collection: S3
    S3_LFR:
      product_type: OL_2_LFR___
      collection: S3
    S3_LRR:
      product_type: OL_2_LRR___
      collection: S3
    S3_RBT:
      product_type: SL_1_RBT___
      collection: S3
    S3_LST:
      product_type: SL_2_LST___
      collection: S3
    S3_LAN:
      product_type: SR_2_LAN___
      collection: S3
  download:
    plugin: HTTPDownload
    base_uri: 'https://peps.cnes.fr/resto'
    dl_url_params:
      issuerId: peps
  auth:
    plugin: GenericAuth
    auth_uri: 'https://peps.cnes.fr/resto/api/users/connect'

scihub:
  priority: 0
  # Queryable products found reading documentation at: https://scihub.copernicus.eu/userguide/3FullTextSearch
  products:
    S2_MSI_L1C:
      product_type: S2MSI1C
    S2_MSI_L2Ap:
      product_type: S2MSI2Ap
    S1_OCN:
      product_type: OCN
    S1_GRD:
      product_type: GRD
    S1_SLC:
      product_type: SLC
    S1_RAW:
      product_type: RAW
  api:
    plugin: SentinelsatAPI
    endpoint: 'https://scihub.copernicus.eu/apihub/'
    metadata_mapping:
      id: '$.uuid'
      geometry:
        - area
        - '$.footprint'
      productType: '$.producttype'
      platform: '$.platformname'
      platformSerialIdentifier: '$.platformidentifier'
      instrument: '$.instrument'
      processingLevel: '$.processingLevel'
      title: '$.title'
      keyword: '$.keywords'
      abstract: '$.summary'
      organisationName: '$.organisationname'
      orbitNumber: '$.orbitnumber'
      orbitDirection: '$.orbitdirection'
      cloudCover:
        - cloudcoverpercentage
        - '$.cloudcover'
      snowCover: '$.snowcover'
      startTimeFromAscendingNode:
        - date
        - '$.beginposition'
      completionTimeFromAscendingNode: '$.endposition'
      parentIdentifier: '$.parentidentifier'
      resolution: '$.resolution'
      sensorMode: '$.sensoroperationalmode'
      quicklook: '$.link_icon'

geostorm-ce:
  priority: 0
  products: {}
  search:
    plugin: CSWSearch
    api_endpoint: 'http://geostorm-ce/rest/catalog/csw/'
    metadata_mapping:
      id: 'dc:identifier/text()'
      abstract: 'dct:abstract/text()'
      startTimeFromAscendingNode: 'dc:date/text()'
      organisationName: 'dc:creator/text()'
    search_definitions:
      # A regex that will be parsed to decide which reference to consider as download url
      resource_location_filter: '^https?'   # match the first resource reference that starts with http or https
      pt_tags:
        # name can be any xml tag of the catalogue that can be queryable (WARNING: the verification of query-ability is not done)
        # matching can be one of:
          # exact: exact match of the query (e.g. L1C)
          # prefix: fuzzy match with the query as a prefix (e.g. L1C*)
          # postfix: fuzzy match with the query as a suffix (e.g. *L1C)
          # fuzzy: pre- and post-fix fuzzy match (e.g. *L1C*)
          # if nothing is given, fuzzy matching is assumed
        - name: 'dc:title'
        - name: 'dc:subject'
          matching: exact
      date_tags:
        start: 'apiso:TempExtent_begin'
        end: 'apiso:TempExtent_end'
  download:
    plugin: HTTPDownload
    base_uri: ''    # no need for such a thing !
  auth:
    plugin: GenericAuth

airbus-ds:
  priority: 0
  products:
    S2_MSI_L1C:
      product_type: S2MSI1C
      partial: true
    S1_RAW:
      product_type: RAW
    S1_GRD:
      product_type: GRD
    S1_SLC:
      product_type: SLC
    S1_OCN:
      product_type: OCN
    S3_LAN:
      product_type: SR_2_LAN___
    S3_SRA:
      product_type: SR_1_SRA___
    S3_SRA_BS:
      product_type: SR_1_SRA_BS
    S3_SRA_A_BS:
      product_type: SR_1_SRA_A_
  search:
    plugin: ArlasSearch
    api_endpoint: 'https://k8s.qualif.geohub.space/api/v1/services/explore'
    quicklook_endpoint: 'https://k8s.qualif.geohub.space/api/v1/services/quicklook'
    arlas_collection: catalog
    metadata_mapping:
      id: '$.properties.uid'
      geometry:
        - gintersect
        - '$.geometry'
      productType:
        - 'identification.type'
        - '$.properties.identification.type'
      platform: '$.properties.acquisition.mission'
      platformSerialIdentifier: '$.properties.acquisition.missionCode'
      instrument: '$.properties.acquisition.sensorId'
      processingLevel: '$.properties.production.levelCode'
      title: '$.properties.identification.externalId'
      orbitNumber: '$.properties.orbit.number'
      orbitDirection: '$.properties.orbit.direction'
      cloudCover:
        - 'contentDesctiption.cloudCoverPercentage'
        - '$.properties.contentDescription.cloudCoverPercentage'
      startTimeFromAscendingNode:
        - 'acquisition.beginViewingDate'
        - '$.properties.acquisition.beginViewingDate'
      completionTimeFromAscendingNode: '$.properties.acquisition.endViewingDate'
  download:
    plugin: HTTPDownload
    base_uri: 'https://k8s.qualif.geohub.space/api/v1/services/download/'
    archive_depth: 2
  auth:
    plugin: HTTPHeaderAuth
    headers:
      Authorization: "Apikey {apikey}"

asf:
  priority: 1
  products:
    ALOS_L1.0:
      product_type: ALOS
      level: L1.0
    ALOS_L1.1:
      product_type: ALOS
      level: L1.1
    ALOS_L1.5:
      product_type: ALOS
      level: L1.5
    ALOS_RTC_LOW_RES:
      product_type: ALOS
      level: RTC_LOW_RES
    ALOS_RTC_HI_RES:
      product_type: ALOS
      level: RTC_HI_RES
    ALOS_BROWSE:
      product_type: ALOS
      level: BROWSE
    A3:
      product_type: A3
    AIRSAR_3FP:
      product_type: AIRSAR
      level: 3FP
    AIRSAR_ATI:
      product_type: AIRSAR
      level: ATI
    AIRSAR_XTILTIF:
      product_type: AIRSAR
      level: XTILTIF
    AIRSAR_PTIF:
      product_type: AIRSAR
      level: PTIF
    AIRSAR_CTIF:
      product_type: AIRSAR
      level: CTIF
    AIRSAR_PSTOKES:
      product_type: AIRSAR
      level: PSTOKES
    AIRSAR_BROWSE:
      product_type: AIRSAR
      level: BROWSE
    AIRSAR_ATI:
      product_type: AIRSAR
      level: DEM
    AIRSAR_CSTOKES:
      product_type: AIRSAR
      level: CSTOKES
    AIRSAR_JPG:
      product_type: AIRSAR
      level: JPG
    AIRSAR_LSTOKES:
      product_type: AIRSAR
      level: LSTOKES
    AS:
      product_type: AS
    ERS-1_L0:
      product_type: ERS-1
      level: L0
    ERS-1_L1:
      product_type: ERS-1
      level: L1
    ERS-1_BROWSE:
      product_type: ERS-1
      level: BROWSE
    E1:
      product_type: E1
    ERS-2_L0:
      product_type: ERS-2
      level: L0
    ERS-2_L1:
      product_type: ERS-2
      level: L1
    ERS-2_BROWSE:
      product_type: ERS-2
      level: BROWSE
    E2:
      product_type: E2
    JERS-1_L0:
      product_type: JERS-1
      level: L0
    JERS-1_L1:
      product_type: JERS-1
      level: L1
    JERS-1_BROWSE:
      product_type: JERS-1
      level: BROWSE
    J1:
      product_type: J1
    RADARSAT-1_L0:
      product_type: RADARSAT-1
      level: L0
    RADARSAT-1_L1:
      product_type: RADARSAT-1
      level: L1
    RADARSAT-1_BROWSE:
      product_type: RADARSAT-1
      level: BROWSE
    R1:
      product_type: R1
    SEASAT_L1:
      product_type: SEASAT
      level: L1
    SEASAT_BROWSE:
      product_type: SEASAT
      level: BROWSE
    SS:
      product_type: SS
    S1_OCN:
      product_type: Sentinel-1A, Sentinel-1B
      level: OCN
      partial: true
    S1_GRD:
      product_type: Sentinel-1A, Sentinel-1B
      level: METADATA GRD, GRD_HS, GRD_HD, GRD_MS, GRD_MD, GRD_FS, GRD_FD
      partial: true
    S1_SLC:
      product_type: Sentinel-1A, Sentinel-1B
      level: SLC
      partial: true
    S1_RAW:
      product_type: Sentinel-1A,Sentinel-1B
      level: RAW
      partial: true
    SA:
      product_type: SA
    SB:
      product_type: SB
    SMAP_L1A_Radar_RO_QA:
      product_type: SMAP
      level: L1A_Radar_RO_QA
    SMAP_L1B_S0_LoRes_HDF5:
      product_type: SMAP
      level: L1B_S0_LoRes_HDF5
    SMAP_L1B_S0_LoRes_QA:
      product_type: SMAP
      level: L1B_S0_LoRes_QA
    SMAP_L1B_S0_LoRes_ISO_XML:
      product_type: SMAP
      level: L1B_S0_LoRes_ISO_XML
    SMAP_L1A_Radar_QA:
      product_type: SMAP
      level: L1A_Radar_QA
    SMAP_L1A_Radar_RO_ISO_XML:
      product_type: SMAP
      level: L1A_Radar_RO_ISO_XML
    SMAP_L1C_S0_HiRes_ISO_XML:
      product_type: SMAP
      level: L1C_S0_HiRes_ISO_XML
    SMAP_L1C_S0_HiRes_QA:
      product_type: SMAP
      level: L1C_S0_HiRes_QA
    SMAP_L1C_S0_HiRes_HDF5:
      product_type: SMAP
      level: L1C_S0_HiRes_HDF5
    SMAP_L1A_Radar_HDF5:
      product_type: SMAP
      level: L1A_Radar_HDF5
    SP:
      product_type: SP
    UAVSAR_KMZ:
      product_type: UAVSAR
      level: KMZ
    UAVSAR_PROJECTED:
      product_type: UAVSAR
      level: PROJECTED
    UAVSAR_PAULI:
      product_type: UAVSAR
      level: PAULI
    UAVSAR_PROJECTED_ML5X5:
      product_type: UAVSAR
      level: PROJECTED_ML5X5
    UAVSAR_STOKES:
      product_type: UAVSAR
      level: STOKES
    UAVSAR_AMPLITUDE:
      product_type: UAVSAR
      level: AMPLITUDE
    UAVSAR_BROWSE:
      product_type: UAVSAR
      level: BROWSE
    UAVSAR_COMPLEX:
      product_type: UAVSAR
      level: COMPLEX
    UAVSAR_DEM_TIFF:
      product_type: UAVSAR
      level: DEM_TIFF
    UAVSAR_PROJECTED_ML3X3:
      product_type: UAVSAR
      level: PROJECTED_ML3X3
    UAVSAR_METADATA:
      product_type: UAVSAR
      level: METADATA
    UAVSAR_AMPLITUDE_GRD:
      product_type: UAVSAR
      level: AMPLITUDE_GRD
    UAVSAR_INTERFEROMETRY:
      product_type: UAVSAR
      level: INTERFEROMETRY
    UAVSAR_INTERFEROMETRY_GRD:
      product_type: UAVSAR
      level: INTERFEROMETRY_GRD
    UA:
      product_type: UA
  search:
    plugin: AsfSearch
    api_endpoint: 'https://api.daac.asf.alaska.edu/services/search/param?keyword=value'
    metadata_mapping:
      id: '$.product_file_id'
      geometry:
        - area
        - '$.stringFootprint'
      productType: '$.missionName'
      platform: '$.platform'
      instrument: '$.instrument'
      processingLevel: '$.processingLevel'
      title: '$.productName'
      orbitNumber: '$.absoluteOrbit'
      orbitDirection: '$.flightDirection'
      cloudCover:
        - cloudcoverpercentage
        - '$.cloudcover'
      snowCover: '$.snowcover'
      startTimeFromAscendingNode:
        - date
        - '$.startTime'
      completionTimeFromAscendingNode: '$.stopTime'
      sensorMode: '$.sensor'
      quicklook: '$.browse'
  download:
    plugin: HTTPDownload
    base_uri: ''
    archive_depth: 2
  auth:
    plugin: GenericAuth